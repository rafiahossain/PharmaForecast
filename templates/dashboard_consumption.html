{% extends 'base.html' %}

{% block title %}Consumption{% endblock %}

{% block body %}
<h1>Consumption and Stock Overview</h1>
<p>This dashboard provides an overview of consumption and stock status distribution. It can be used to get insights for better inventory planning: avoiding stockouts or overstocking.</p>

<div class="consumption-overview">
  <div class="chart-box">
    <h2>Total Consumption by Product Category</h2>
    {% if consumption_plot %}
      <img src="data:image/png;base64,{{ consumption_plot }}">
    {% else %}
      <p>No chart available. Upload data to view.</p>
    {% endif %}
  </div>

  <div class="chart-box">
    <h2>Stock Status Distribution</h2>
    {% if stock_status_plot %}
      <img src="data:image/png;base64,{{ stock_status_plot }}">
    {% else %}
      <p>No chart available. Upload data to view.</p>
    {% endif %}
  </div>

  <div class="takeaways-box">
    <h2>Key Takeaways</h2>
    <ul>
      <li>Product categories that contribute most to overall consumption.</li>
      <li>If current stock is <strong>Low</strong>, <strong>Normal</strong>, or <strong>High</strong> based on months of supply.</li>
      <li>Top items and their average consumption.</li>
      <li>Distribution of consumption by item type.</li>
    </ul>
  </div>
</div>

<div class="consumption-bottom">
  <div class="chart-large">
    <h2>Top 5 Items by Average Monthly Consumption</h2>
    {% if avg_consumption_plot %}
      <img src="data:image/png;base64,{{ avg_consumption_plot }}">
    {% else %}
      <p>No chart available.</p>
    {% endif %}
  </div>

  <div class="chart-small">
    <h2>Consumption: Boxes vs Regular Units</h2>
    {% if box_vs_regular_plot %}
      <img src="data:image/png;base64,{{ box_vs_regular_plot }}">
    {% else %}
      <p>No chart available.</p>
    {% endif %}
  </div>
</div>

{% endblock %}
